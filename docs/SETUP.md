# ðŸ”§ Mission Control Setup Guide

Complete walkthrough to get Mission Control running locally and in production.

---

## Prerequisites

Before you begin, ensure you have:

### Required
- **Node.js 18+** ([Download](https://nodejs.org/))
- **npm** or **yarn** (comes with Node.js)
- **Git** ([Download](https://git-scm.com/))
- **Convex account** ([Sign up free](https://convex.dev/))

### Optional (for advanced features)
- **Supabase account** ([Sign up](https://supabase.com/)) - for Ops Kernel
- **Stripe account** ([Sign up](https://stripe.com/)) - for revenue tracking
- **Whop account** ([Sign up](https://whop.com/)) - for Whop integration
- **OpenAI API key** ([Get key](https://platform.openai.com/)) - for AI summaries

---

## Step 1: Clone the Repository

```bash
# Clone your fork/template
git clone https://github.com/YourUsername/mission-control-template.git

# Navigate into the directory
cd mission-control-template

# Install dependencies
npm install
```

**Troubleshooting:**
- If `npm install` fails, try deleting `package-lock.json` and running `npm install` again
- Use Node.js 18+ (check with `node -v`)

---

## Step 2: Set Up Convex

Convex is the real-time database and backend for Mission Control.

### 2.1 Install Convex CLI

```bash
npm install -g convex
```

### 2.2 Login to Convex

```bash
npx convex login
```

This opens your browser to authenticate with GitHub. Approve the access.

### 2.3 Initialize Convex Dev Environment

```bash
npx convex dev
```

**What happens:**
1. Creates a new Convex project (or connects to existing)
2. Generates your deployment URL
3. Auto-creates `.env.local` with `CONVEX_DEPLOYMENT` and `NEXT_PUBLIC_CONVEX_URL`
4. Starts watching for backend changes

**Keep this terminal open!** The dev server needs to stay running.

---

## Step 3: Configure Environment Variables

### 3.1 Copy the example file

```bash
cp .env.example .env.local
```

### 3.2 Verify Convex variables

Check that `.env.local` contains (auto-generated by `npx convex dev`):

```bash
CONVEX_DEPLOYMENT=local:local-yourproject-xxxxx
NEXT_PUBLIC_CONVEX_URL=http://127.0.0.1:3210
```

### 3.3 Add optional integrations

Edit `.env.local` to add API keys for optional features:

#### Revenue Tracking (Optional)
```bash
STRIPE_SECRET_KEY=sk_test_xxxxx
WHOP_API_KEY=apik_xxxxx
```

#### AI Summaries (Optional)
```bash
OPENAI_API_KEY=sk-proj-xxxxx
```

#### Ops Kernel (Optional)
```bash
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJxxxxx
```

**Security Note:** Never commit `.env.local` to Git! It's in `.gitignore` by default.

---

## Step 4: Start the Development Server

Open a **new terminal** (keep `npx convex dev` running in the first one):

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) in your browser.

---

## Step 5: Seed Initial Data

Your dashboard will be empty until you seed data.

### Option A: Via UI (Recommended)

1. Open [http://localhost:3000](http://localhost:3000)
2. Click the **"DEPLOY AGENT SQUAD"** button
3. Refresh the page

### Option B: Via CLI

```bash
npx convex run seed:seed
```

**What gets seeded:**
- 6 example agents (Jarvis, Closer, Ghost, Hype, Forge, Scout)
- 6 sample tasks
- Initial metrics (emails, tweets, revenue)
- 5 activity log entries

---

## Step 6: Test the API

Verify your API endpoints work:

```bash
# Test heartbeat
curl -X POST http://localhost:3000/api/heartbeat \
  -H "Content-Type: application/json" \
  -d '{"name":"Jarvis","status":"active","currentTask":"Testing API"}'

# Test activity log
curl -X POST http://localhost:3000/api/activity \
  -H "Content-Type: application/json" \
  -d '{"agent":"Jarvis","action":"Test","detail":"API test successful"}'
```

Check the dashboard - you should see updates in real-time!

---

## Step 7: Customize Your Dashboard

Now that everything works, customize it:

### 7.1 Edit agents
Open `convex/seed.ts` and modify the agents array:

```typescript
const agents = [
  { name: "YourAgent", role: "Your Role", emoji: "ðŸ¤–", ... },
];
```

### 7.2 Customize metrics
Edit `src/components/MetricsBar.tsx` to add your metrics:

```typescript
const METRIC_CONFIG = {
  your_metric: { label: "Your Metric", icon: "ðŸŽ¯" },
};
```

### 7.3 Adjust styling
- Colors: `src/app/globals.css`
- Layout: `src/app/page.tsx`
- Components: `src/components/`

See [`CUSTOMIZATION.md`](CUSTOMIZATION.md) for details.

---

## Optional: Set Up Ops Kernel

The Ops Kernel enables advanced features like agent memory and automated summaries.

### Prerequisites
- Supabase account
- `SUPABASE_URL` and `SUPABASE_SERVICE_ROLE_KEY` in `.env.local`

### 1. Create Supabase Project

1. Go to [supabase.com/dashboard](https://supabase.com/dashboard)
2. Click "New Project"
3. Copy your project URL and service role key

### 2. Run Migrations

```bash
# Install Supabase CLI (optional, for local dev)
npm install -g supabase

# Option A: Via Supabase Dashboard
# - Go to SQL Editor
# - Paste contents of `supabase/migrations/202602080001_ops_kernel_v2.sql`
# - Run query
# - Repeat for `202602080002_agent_memories.sql`

# Option B: Via CLI (if using local Supabase)
supabase migration up
```

### 3. Test Ops Endpoints

```bash
# Health check
curl http://localhost:3000/api/ops/health

# Standup summary
curl http://localhost:3000/api/ops/standup

# Morning briefing
curl http://localhost:3000/api/ops/briefing
```

---

## Next Steps

âœ… **Local development is ready!**

Now you can:
- [Deploy to production](DEPLOYMENT.md)
- [Configure advanced features](CONFIGURATION.md)
- [Customize the dashboard](CUSTOMIZATION.md)
- Build your agent integrations

---

## Troubleshooting

### "Convex deployment not found"
- Make sure `npx convex dev` is running
- Check `.env.local` has `CONVEX_DEPLOYMENT`

### Port 3000 already in use
```bash
# Kill the process using port 3000
lsof -ti:3000 | xargs kill

# Or run on a different port
PORT=3001 npm run dev
```

### Module not found errors
```bash
# Clear cache and reinstall
rm -rf node_modules package-lock.json
npm install
```

### Seed button doesn't work
- Open browser console (F12) for errors
- Check `npx convex dev` terminal for backend errors
- Try manual seed: `npx convex run seed:seed`

### API calls return 404
- Verify Next.js dev server is running (`npm run dev`)
- Check route files exist in `src/app/api/`
- Check browser Network tab for actual error

---

Need more help? Check the [main README](../README.md) or open an [issue](https://github.com/YourUsername/mission-control-template/issues).
